<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Indoor Air Quality Monitor</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üåø Indoor Air Quality Monitor</h1>
            <div class="datetime" id="currentDateTime"></div>
        </div>

        <div class="connection-status">
            <div class="status-indicator" id="connectionStatus">
                <div class="status-dot"></div>
                <span id="statusText">Disconnected</span>
            </div>
            <div class="last-update-group">
                <div class="last-update">
                    CO‚ÇÇ/TVOC/eCO‚ÇÇ Last Update: <span id="lastUpdateCO2">-</span>
                </div>
                <div class="last-update">
                    PM Last Update: <span id="lastUpdatePM">-</span>
                </div>
            </div>
        </div>

        <div class="tab-buttons">
            <button class="tab-btn active" onclick="showTab('realtime')">Real-Time Monitor</button>
            <button class="tab-btn" onclick="showTab('history')">24-Hour Analysis</button>
        </div>

        <!-- Real-Time Tab -->
        <div id="realtime" class="tab-content active">
            <div class="realtime-grid">
                <div style="width: 100%;">
                    <div class="sensors-grid" style="grid-template-columns: repeat(3, 1fr); margin-bottom: 10px;">
                        <div class="sensor-card-modern gauge-card">
                            <div class="gauge-location-label">CO‚ÇÇ</div>
                            <div class="modern-gauge large-gauge" id="co2Gauge">
                                <svg viewBox="0 0 180 180" class="gauge-svg large-svg">
                                    <circle class="gauge-bg" cx="90" cy="90" r="78"/>
                                    <path class="gauge-arc" id="co2Arc"/>
                                    <circle class="gauge-knob" id="co2Knob" r="13" cx="90" cy="90"/>
                                </svg>
                                <div class="gauge-value-center large-center">
                                    <div class="gauge-value-number large-number" id="co2Value">-</div>
                                    <div class="gauge-value-unit large-unit">ppm</div>
                                </div>
                            </div>
                            <div class="gauge-status-label" id="co2StatusLabel">-</div>
                        </div>
                        <div class="sensor-card-modern gauge-card">
                            <div class="gauge-location-label">TVOC</div>
                            <div class="modern-gauge large-gauge" id="tvocGauge">
                                <svg viewBox="0 0 180 180" class="gauge-svg large-svg">
                                    <circle class="gauge-bg" cx="90" cy="90" r="78"/>
                                    <path class="gauge-arc" id="tvocArc"/>
                                    <circle class="gauge-knob" id="tvocKnob" r="13" cx="90" cy="90"/>
                                </svg>
                                <div class="gauge-value-center large-center">
                                    <div class="gauge-value-number large-number" id="tvocValue">-</div>
                                    <div class="gauge-value-unit large-unit">ppb</div>
                                </div>
                            </div>
                            <div class="gauge-status-label" id="tvocStatusLabel">-</div>
                        </div>
                        <div class="sensor-card-modern gauge-card">
                            <div class="gauge-location-label">eCO‚ÇÇ</div>
                            <div class="modern-gauge large-gauge" id="eco2Gauge">
                                <svg viewBox="0 0 180 180" class="gauge-svg large-svg">
                                    <circle class="gauge-bg" cx="90" cy="90" r="78"/>
                                    <path class="gauge-arc" id="eco2Arc"/>
                                    <circle class="gauge-knob" id="eco2Knob" r="13" cx="90" cy="90"/>
                                </svg>
                                <div class="gauge-value-center large-center">
                                    <div class="gauge-value-number large-number" id="eco2Value">-</div>
                                    <div class="gauge-value-unit large-unit">ppm</div>
                                </div>
                            </div>
                            <div class="gauge-status-label" id="eco2StatusLabel">-</div>
                        </div>
                    </div>
                    <div class="sensors-grid" style="grid-template-columns: repeat(3, 1fr);">
                        <div class="sensor-card-modern gauge-card">
                            <div class="gauge-location-label">PM 1.0</div>
                            <div class="modern-gauge large-gauge" id="pm1Gauge">
                                <svg viewBox="0 0 180 180" class="gauge-svg large-svg">
                                    <circle class="gauge-bg" cx="90" cy="90" r="78"/>
                                    <path class="gauge-arc" id="pm1Arc"/>
                                    <circle class="gauge-knob" id="pm1Knob" r="13" cx="90" cy="90"/>
                                </svg>
                                <div class="gauge-value-center large-center">
                                    <div class="gauge-value-number large-number" id="pm1Value">-</div>
                                    <div class="gauge-value-unit large-unit">Œºg/m¬≥</div>
                                </div>
                            </div>
                            <div class="gauge-status-label" id="pm1StatusLabel">-</div>
                        </div>
                        <div class="sensor-card-modern gauge-card">
                            <div class="gauge-location-label">PM 2.5</div>
                            <div class="modern-gauge large-gauge" id="pm25Gauge">
                                <svg viewBox="0 0 180 180" class="gauge-svg large-svg">
                                    <circle class="gauge-bg" cx="90" cy="90" r="78"/>
                                    <path class="gauge-arc" id="pm25Arc"/>
                                    <circle class="gauge-knob" id="pm25Knob" r="13" cx="90" cy="90"/>
                                </svg>
                                <div class="gauge-value-center large-center">
                                    <div class="gauge-value-number large-number" id="pm25Value">-</div>
                                    <div class="gauge-value-unit large-unit">Œºg/m¬≥</div>
                                </div>
                            </div>
                            <div class="gauge-status-label" id="pm25StatusLabel">-</div>
                        </div>
                        <div class="sensor-card-modern gauge-card">
                            <div class="gauge-location-label">PM 10</div>
                            <div class="modern-gauge large-gauge" id="pm10Gauge">
                                <svg viewBox="0 0 180 180" class="gauge-svg large-svg">
                                    <circle class="gauge-bg" cx="90" cy="90" r="78"/>
                                    <path class="gauge-arc" id="pm10Arc"/>
                                    <circle class="gauge-knob" id="pm10Knob" r="13" cx="90" cy="90"/>
                                </svg>
                                <div class="gauge-value-center large-center">
                                    <div class="gauge-value-number large-number" id="pm10Value">-</div>
                                    <div class="gauge-value-unit large-unit">Œºg/m¬≥</div>
                                </div>
                            </div>
                            <div class="gauge-status-label" id="pm10StatusLabel">-</div>
                        </div>
                    </div>
                </div>
                <div class="status-panel">
                    <div class="aqi-status">
                        <!-- Temperature and Humidity display above status -->
                        <div style="display: flex; justify-content: space-around; margin-bottom: 20px; padding: 15px; background: rgba(102, 126, 234, 0.1); border-radius: 10px;">
                            <div style="text-align: center;">
                                <div style="font-size: 0.9rem; color: #666; margin-bottom: 5px;">üå°Ô∏è Temperature</div>
                                <div style="font-size: 1.8rem; font-weight: bold; color: #333;" id="tempValue">-</div>
                                <div style="font-size: 0.8rem; color: #888;">¬∞C</div>
                            </div>
                            <div style="text-align: center;">
                                <div style="font-size: 0.9rem; color: #666; margin-bottom: 5px;">üíß Humidity</div>
                                <div style="font-size: 1.8rem; font-weight: bold; color: #333;" id="humidityValue">-</div>
                                <div style="font-size: 0.8rem; color: #888;">%</div>
                            </div>
                        </div>
                        
                        <div class="aqi-value" id="aqiValue">-</div>
                        <div class="aqi-label" id="aqiLabel">No Data</div>
                        <p style="margin-top: 10px; font-size: 0.9rem; color: #666;" id="aqiDescription">
                            Waiting for sensor data...
                        </p>
                        <div id="affectedGroups" style="margin-top: 15px; display: none;">
                            <h4 style="color: #333; margin-bottom: 10px;">üë• Affected Groups:</h4>
                            <div id="affectedGroupsList" style="font-size: 0.9rem; color: #666;"></div>
                        </div>
                    </div>

                    <div class="recommendations">
                        <h3>üí° Recommendations</h3>
                        <div class="recommendation">
                            <strong>‚è≥ Waiting:</strong> Connecting to sensors for real-time data...
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- History Tab -->
        <div id="history" class="tab-content">
            <div class="charts-container">
                <div class="chart-card">
                    <div class="chart-title">CO‚ÇÇ Levels (24 Hours)</div>
                    <canvas id="co2Chart"></canvas>
                </div>
                <div class="chart-card">
                    <div class="chart-title">Particulate Matter (PM)</div>
                    <canvas id="pmChart"></canvas>
                </div>
                <div class="chart-card">
                    <div class="chart-title">TVOC Levels</div>
                    <canvas id="tvocChart"></canvas>
                </div>
                <div class="chart-card">
                    <div class="chart-title">Temperature & Humidity</div>
                    <canvas id="tempHumChart"></canvas>
                </div>
            </div>

            <div class="insights-grid" id="insightsGrid">
                <!-- Cards will be populated by JS -->
            </div>
        </div>
    </div>
    <script src="{{ url_for('static', filename='main.js') }}"></script>
</body>
</html>